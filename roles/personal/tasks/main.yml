---
- name: clone dotfiles
  git: >-
    repo=git@github.com:tmtxt/dotfiles.git
    dest=~/dotfiles
    accept_hostkey=yes
    recursive=yes

- name: clone oh my zsh
  git: >-
    repo=git@github.com:robbyrussell/oh-my-zsh.git
    dest=~/.oh-my-zsh
    accept_hostkey=yes
    recursive=yes

- name: symlink .zshrc to home folder
  file: >-
    src=~/dotfiles/.zshrc
    dest=~/.zshrc
    state=link

- name: change user default shell to zsh
  become: yes
  user: name={{ ssh_user }} shell=/usr/bin/zsh
