---
# when first created, only able to ssh into that server using root user
# using root user to create the personal tmtxt user
- hosts: p1
  gather_facts: no

  vars:
    ansible_user: root
    tmtxt_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64663630336131316638383636643433643466376239323238343832386566396338306433663566
          6234623935643539616439616662326334633734303638630a306265363330366466616564633832
          31643036366662316332653166393335383263333764333538396564616566333232393034663362
          3664633535636530320a383333643732316235643663633333613562613761363733663130353866
          37373132643262373235333531643530333361353063333639333265313731393531356137306439
          37303330613233383266626630316438383234303433396238663537363864373339636566326264
          36653461383361353363336536353263306566353461666137666536656234623834633432643265
          61313037326438306130646131613630623331336430373336356361336431393634643836666534
          39613236363162313632306261366162353737353836613731313438346439386566

  pre_tasks:
    - name: install python2
      raw: apt-get -y install python
      changed_when: false

  tasks:
    - name: add user tmtxt
      user:
        name: tmtxt
        comment: TruongTX
        groups: sudo
        password: "{{ tmtxt_password }}"
